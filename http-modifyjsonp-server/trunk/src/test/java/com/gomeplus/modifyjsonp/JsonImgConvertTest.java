package com.gomeplus.modifyjsonp;

import com.gomeplus.modifyjsonp.config.ConfigUtil;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

/**
 * Created by xue on 11/28/16.
 */
public class JsonImgConvertTest {
    static String newGomeImgHost = "meixincdn.com";

    @Test
    public void testAssertTotalEquals() {
        String originGomeImgHost = ConfigUtil.getProperty("originGomeImgHost");
        // 原 line
        //String line = "jianjie(\"<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'><html xmlns='http://www.w3.org/1999/xhtml'><head><meta http-equiv='Content-Type' content='text/html; charset=utf-8' /><title>无标题文档</title><style type='text/css'><!--.tongyongwm {font-family: '微软雅黑';font-size: 14px;line-height: 25px;color: #666666;}.tongyongaa {font-family: '微软雅黑';font-size: 15px;line-height: 30px;color: #666666;}.tongyongbb {font-family: '微软雅黑';font-size: 17px;line-height: 37px;font-weight: normal;color: #666666;}.wmysaa {font-family: '微软雅黑';font-size: 11px;line-height: 20px;color: #666666;}.wmysbb {font-family: '微软雅黑';font-size: 15px;line-height: 25px;color: #66CCCC;font-weight: bold;}.wmyscc {font-family: '微软雅黑';font-size: 18px;line-height: 27px;color: #FF9900;font-weight: bold;}.wmysdd {font-family: '微软雅黑';font-size: 24px;line-height: 30px;color: #666666;font-weight: bold;}.wmysee {font-family: '微软雅黑';font-size: 31px;line-height: 40px;font-weight: bold;color: #333333;}.bkwmys {border: 2px solid #e6e6e6;text-align: center;}.dwwmys {position: relative;}.shouhangsuojwm {font-family: '微软雅黑';font-size: 14px;line-height: 25px;color: #666666;text-indent: 2em;}.tongyongcc {font-size: 16px;color: #990000;font-weight: bold;font-family: '微软雅黑';}--></style></head><body><table width='750' border='0' cellspacing='0' cellpadding='0'>  <tr>    <td><table id='__01' width='750' height='' border='0' cellpadding='0' cellspacing='0'>            <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/991.jpg' width='750' height='44' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_01.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_02.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_03.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_04.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_05.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_06.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_07.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_08.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_09.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_10.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_11.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_12.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_13.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_14.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_15.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_16.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_17.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_18.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_19.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_20.jpg' width='750' height='297' alt='' /></td>      </tr>    </table></td>  </tr>  <tr>    <td>&nbsp;</td>  </tr></table></body></html>\")";
        // 预生产和真实环境域名
        String line = "jianjie(\"<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'><html xmlns='http://www.w3.org/1999/xhtml'><head><meta http-equiv='Content-Type' content='text/html; charset=utf-8' /><title>无标题文档</title><style type='text/css'><!--.tongyongwm {font-family: '微软雅黑';font-size: 14px;line-height: 25px;color: #666666;}.tongyongaa {font-family: '微软雅黑';font-size: 15px;line-height: 30px;color: #666666;}.tongyongbb {font-family: '微软雅黑';font-size: 17px;line-height: 37px;font-weight: normal;color: #666666;}.wmysaa {font-family: '微软雅黑';font-size: 11px;line-height: 20px;color: #666666;}.wmysbb {font-family: '微软雅黑';font-size: 15px;line-height: 25px;color: #66CCCC;font-weight: bold;}.wmyscc {font-family: '微软雅黑';font-size: 18px;line-height: 27px;color: #FF9900;font-weight: bold;}.wmysdd {font-family: '微软雅黑';font-size: 24px;line-height: 30px;color: #666666;font-weight: bold;}.wmysee {font-family: '微软雅黑';font-size: 31px;line-height: 40px;font-weight: bold;color: #333333;}.bkwmys {border: 2px solid #e6e6e6;text-align: center;}.dwwmys {position: relative;}.shouhangsuojwm {font-family: '微软雅黑';font-size: 14px;line-height: 25px;color: #666666;text-indent: 2em;}.tongyongcc {font-size: 16px;color: #990000;font-weight: bold;font-family: '微软雅黑';}--></style></head><body><table width='750' border='0' cellspacing='0' cellpadding='0'>  <tr>    <td><table id='__01' width='750' height='' border='0' cellpadding='0' cellspacing='0'>            <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/991.jpg' width='750' height='44' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_01.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_02.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_03.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_04.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_05.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_06.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_07.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_08.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_09.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_10.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_11.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_12.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_13.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_14.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_15.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_16.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_17.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img5." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_18.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_19.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='http://app.gome.com.cn/images/grey.gif'  class='gomeImgLoad'   gome-src='http://img6." + originGomeImgHost + "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_20.jpg' width='750' height='297' alt='' /></td>      </tr>    </table></td>  </tr>  <tr>    <td>&nbsp;</td>  </tr></table></body></html>\")";
        String expectLine = "";
        if (ConfigUtil.getProperty("ENV").equals("pro")) {
            expectLine = "jianjie(\"<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'><html xmlns='http://www.w3.org/1999/xhtml'><head><meta http-equiv='Content-Type' content='text/html; charset=utf-8' /><title>无标题文档</title><style type='text/css'><!--.tongyongwm {font-family: '微软雅黑';font-size: 14px;line-height: 25px;color: #666666;}.tongyongaa {font-family: '微软雅黑';font-size: 15px;line-height: 30px;color: #666666;}.tongyongbb {font-family: '微软雅黑';font-size: 17px;line-height: 37px;font-weight: normal;color: #666666;}.wmysaa {font-family: '微软雅黑';font-size: 11px;line-height: 20px;color: #666666;}.wmysbb {font-family: '微软雅黑';font-size: 15px;line-height: 25px;color: #66CCCC;font-weight: bold;}.wmyscc {font-family: '微软雅黑';font-size: 18px;line-height: 27px;color: #FF9900;font-weight: bold;}.wmysdd {font-family: '微软雅黑';font-size: 24px;line-height: 30px;color: #666666;font-weight: bold;}.wmysee {font-family: '微软雅黑';font-size: 31px;line-height: 40px;font-weight: bold;color: #333333;}.bkwmys {border: 2px solid #e6e6e6;text-align: center;}.dwwmys {position: relative;}.shouhangsuojwm {font-family: '微软雅黑';font-size: 14px;line-height: 25px;color: #666666;text-indent: 2em;}.tongyongcc {font-size: 16px;color: #990000;font-weight: bold;font-family: '微软雅黑';}--></style></head><body><table width='750' border='0' cellspacing='0' cellpadding='0'>  <tr>    <td><table id='__01' width='750' height='' border='0' cellpadding='0' cellspacing='0'>            <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i2.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/991.jpg' width='750' height='44' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i8.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_01.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i3.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_02.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i6.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_03.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i0.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_04.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i6.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_05.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i1.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_06.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i3.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_07.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i5.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_08.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i5.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_09.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i4.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_10.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i3.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_11.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i3.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_12.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i7.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_13.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i1.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_14.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i5.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_15.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i3.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_16.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i2.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_17.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i2.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_18.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i1.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_19.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i5.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_20.jpg' width='750' height='297' alt='' /></td>      </tr>    </table></td>  </tr>  <tr>    <td>&nbsp;</td>  </tr></table></body></html>\")";
        } else {
            expectLine = "jianjie(\"<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'><html xmlns='http://www.w3.org/1999/xhtml'><head><meta http-equiv='Content-Type' content='text/html; charset=utf-8' /><title>无标题文档</title><style type='text/css'><!--.tongyongwm {font-family: '微软雅黑';font-size: 14px;line-height: 25px;color: #666666;}.tongyongaa {font-family: '微软雅黑';font-size: 15px;line-height: 30px;color: #666666;}.tongyongbb {font-family: '微软雅黑';font-size: 17px;line-height: 37px;font-weight: normal;color: #666666;}.wmysaa {font-family: '微软雅黑';font-size: 11px;line-height: 20px;color: #666666;}.wmysbb {font-family: '微软雅黑';font-size: 15px;line-height: 25px;color: #66CCCC;font-weight: bold;}.wmyscc {font-family: '微软雅黑';font-size: 18px;line-height: 27px;color: #FF9900;font-weight: bold;}.wmysdd {font-family: '微软雅黑';font-size: 24px;line-height: 30px;color: #666666;font-weight: bold;}.wmysee {font-family: '微软雅黑';font-size: 31px;line-height: 40px;font-weight: bold;color: #333333;}.bkwmys {border: 2px solid #e6e6e6;text-align: center;}.dwwmys {position: relative;}.shouhangsuojwm {font-family: '微软雅黑';font-size: 14px;line-height: 25px;color: #666666;text-indent: 2em;}.tongyongcc {font-size: 16px;color: #990000;font-weight: bold;font-family: '微软雅黑';}--></style></head><body><table width='750' border='0' cellspacing='0' cellpadding='0'>  <tr>    <td><table id='__01' width='750' height='' border='0' cellpadding='0' cellspacing='0'>            <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/991.jpg' width='750' height='44' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_01.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_02.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_03.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_04.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_05.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_06.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_07.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_08.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_09.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_10.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_11.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_12.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_13.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_14.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_15.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_16.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_17.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_18.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_19.jpg' width='750' height='297' alt='' /></td>      </tr>      <tr>        <td><img src='https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK'  class='gomeImgLoad'   gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/1_20.jpg' width='750' height='297' alt='' /></td>      </tr>    </table></td>  </tr>  <tr>    <td>&nbsp;</td>  </tr></table></body></html>\")";
        }

        String newHtml = JsonpImgConverter.convert(line);
        assertEquals("failure - strings are not equal",expectLine, newHtml);
    }

    /**
     * 验证 '//' 不替换
     */
    @Test
    public void testAssertEqual0() {
        String originGomeImgHost = ConfigUtil.getProperty("originGomeImgHost");
        String line = "<img gome-src=\"//a.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/991.jpg\" >";
        String expectLine = "<img gome-src=\"//a.gomein.net.cn/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/991.jpg\" >";
        String newHtml = JsonpImgConverter.convert(line);
        assertEquals("failure - strings are not equal",expectLine, newHtml);
    }

    /**
     * 验证 img[0-9]{1,2}.gomein.net.cn 替换为 https://i[0-9].meixincdn.com/gi
     */
    @Test
    public void testAssertEqual1() {
        String originGomeImgHost = ConfigUtil.getProperty("originGomeImgHost");
        String line = "<img gome-src=\"http://img5."+ originGomeImgHost+ "/image/prodimg/productDesc/descImg/201505/desc1417/1122470422/991.jpg\">";
        String expectLine = "";
        if (ConfigUtil.getProperty("ENV").equals("pro")) {
            expectLine = "<img gome-src='https://i2.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/991.jpg'>";
        } else {
            expectLine = "<img gome-src='https://i-pre.meixincdn.com/gi/prodimg/productDesc/descImg/201505/desc1417/1122470422/991.jpg'>";

        }
        String newHtml = JsonpImgConverter.convert(line);
        assertEquals("failure - strings are not equal",expectLine, newHtml);
    }
    /**
     * 验证 gfs 转换
     */
    @Test
    public void testAssertEqual2() {
        String originGomeImgHost = ConfigUtil.getProperty("originGomeImgHost");
        String line = "<img gome-src=\"http://gfs5." + originGomeImgHost+ "/image_prodimg_test.jpg\">";
        String expectLine = "";
        if (ConfigUtil.getProperty("ENV").equals("pro")) {
            expectLine = "<img gome-src='https://i4.meixincdn.com/g/image_prodimg_test'>";
        } else {
            expectLine = "<img gome-src='https://i-pre.meixincdn.com/g/image_prodimg_test'>";

        }
        String newHtml = JsonpImgConverter.convert(line);
        assertEquals("failure - strings are not equal",expectLine, newHtml);
    }
    /**
     * 验证 grey.gif 全替换
     */
    @Test
    public void testAssertEqual3() {
        String line = "<img src=\"http://app.gome.com.cn/images/grey.gif\"></img> <img src=\"http://app.gome.com.cn/images/grey.gif\"></img>";
        String expectLine = "<img src=\"https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK\"></img> <img src=\"https://i3.meixincdn.com/T16aCTB_Kv1R4n9VrK\"></img>";
        String newHtml = JsonpImgConverter.convert(line);
        assertEquals("failure - strings are not equal",expectLine, newHtml);
    }
}
